<html><head><title>Class File Reader &amp; Writer</title>


<meta name="Keywords" content="Java, Class File, Class Files, Java VM, Serialize">
<style>A {text-decoration:none}</style></head><body alink="red" bgcolor="white" link="blue" text="black" vlink="purple">

<h1>Classfile Reader &amp; Writer</h1>

<p>This package makes it easy to read and write java classfiles.
It doesn't, however, provide any help with displaying the contents
of a classfile to the user (unless you count debug output), or
disassembling the bytecodes.

</p><p>This code snippet will read in a classfile and write it back
out to a different file.

</p><blockquote>
<pre class="java">InputStream is = new FileInputStream("Foo.class");
OutputStream os = new FileOutputStream("FooCopy.class");
ClassInfo classInfo = new ClassInfo();
new ClassFileReader().read(is, classInfo);
classInfo.setName("FooCopy");  // Java requires the class name to match the file name
new ClassFileWriter().write(classInfo, os);
is.close();os.close();</pre>
</blockquote>

<p>Here is the <a href="http://www.kimbly.com/code/docs/Package-sli.kim.classfile.html">API documentation</a>.
<br>Here is the <a href="http://www.kimbly.com/code/classfile/classfile.zip">source</a> (56K).
<br>Here is the <a href="http://www.kimbly.com/code/vmspec/vmspec-1.html">VM Spec</a> that I used.

</p><p>The package can read "obfuscated" classfiles, like
those generated by Crema, but it can't write them. Obfuscated
classfiles have invalid data in them and the only reason they work
is because most VMs ignore the data that's invalid (attributes like
SourceFile, LineNumberTable, and LocalVariableTable). If a
ClassFileReader encounters invalid data, it just ignores it.

</p><h2>License</h2>

<p>I have released the package to the <b>public domain</b>.  That means
you may use it for whatever you want, and you don't even have to
ask my permission, or mention my name.


</p><h2>Related Work</h2>

<ul><li><a href="http://jakarta.apache.org/bcel/">Bytecode Engineering 
	Library</a>. Very similar to this package, but apparently being 
	actively supported.  It has more support for bytecodes than I do.
</li><li><a href="http://www.brouhaha.com/%7Eeric/computers/mocha.html">Mocha,	
	the java decompiler</a>. I love this tool.
</li><li>Crema, the java obfuscator. No longer available. Very unfortunate --
	this was good software.
</li><li><a href="http://found.cs.nyu.edu/meyer/jasmin/">Jasmin</a>. High-level 
	java assembler. Takes ASCII input. No support for reading.
</li><li><a href="http://grunge.cs.tu-berlin.de/%7Etolk/vmlanguages.html">Programming
	Languages for the Java Virtual Machine</a>. List of mostly experimental 
	languages that compile to the Java VM.
</li></ul>


<h2>Past Enhancements</h2>

<ul>
<li>2/1/97, version 1.0 released.
</li><li>3/30/97, version 2.0 released. De-emphasized constant pool indexes.
	Support for writing.
</li><li>4/3/97, version 2.1 released. Support for JDK 1.1 inner classes and 
	Synthetic fields. Graceful degradation when faced with obfuscated
	classfiles.
</li><li>4/9/97, version 2.2 released. Support for deprecated methods. Fixed 
	two bugs in Signature class: method signatures don't use commas 
	between arguments, and "Z" stands for boolean. Fixed 
	bug with exception tables: finally blocks don't have a catch type.
	Indented debug output to make it easier to read.
</li><li>4/15/97, version 2.3 released. Fixed two bugs with inner classes: 
	anonymous inner classes don't have a simple name; static inner 
	classes don't have an outer class. Improved documentation for 
	ClassInfo.setInnerClasses().
</li></ul>

<hr>
<p><i>Last updated April 15, 1997</i><br>
Back to <a href="http://www.kimbly.com/code/">Kimberley's Code</a>.<br>
Back to <a href="http://www.kimbly.com/">Kimberley's Home Page</a>.


</p></body></html>